# 项目介绍

简介:用户可以进入前台与照片交互；管理员进入后台审核照片、管理账户信息。

## 前台

`游客`和`User`（账户角色）可以进入前台页面。

### `游客`可以：

1. 浏览照片
2. 查看照片评论
3. 进入其他用户页面
   1. 查看该用户已发布的照片
4. 照片曝光埋点
5. 注册
6. 登录

### `User`可以（权限包括了游客权限）：

1. 与照片交互（点赞、评论）
2. 点赞评论
3. 修改个人信息
4. 进入我的页面
   1. 公开或不公开我喜欢的照片 （待定）
   2. 查看照片审核状态
5. 发布照片
6. 获得照片被审核通过的推送消息

## 后台

后台必须登录才能进入，后台角色分为`Admin`和`SuperAdmin`。

### Admin 可以:

1. 查看所有照片
2. 审核照片
3. 修改个人信息

### SuperAdmin 可以(权限包括了 Admin 权限):

1. 修改任意用户的账户信息
2. 下发管理员账户

# 环境搭建

1. 配置路由
2. 配置环境变量
3. 配置 Vue 插件
4. 配置 css 文件
5. 二次封装 axios
6. 封装工具函数 nprogress
7. 配置初始化路由表
8. 封装设置仓库（修改主题，多语言）

# 登录注册

登录注册页是整个系统的入口。
可以注册 User 角色登录到前台项目，也可以直接游客进入前台项目中。
若登录的是管理员账号，则需要进入后台项目。
根据用户登录时的角色，动态注册路由。
若用户直接访问前台中的路由则根据本地中的用户是否登录来注册前台路由，并进入前台项目的对应路由中。

# 前台

可以直接访问前台项目，无需登录，当然也可以跳转到登录页登录账户，登录成功享有更多功能。

## 布局

头部导航栏，主视图的上下结构。
导航栏有：我的（登录）、首页、搜索
菜单栏：在登录状态和非登录状态提供不同的菜单项

1. 登录状态:发送照片、我喜欢的照片、我的照片、我的、注销
2. 非登录状态:登录
3. 都可以使用的：主题切换、国际化、浏览的历史

## 页面

1. 首页
   1. 瀑布流布局
   2. 初始骨架屏加载
   3. 无限加载
2. 搜索页（待定）
3. 我的
   1. 我喜欢的照片
   2. 我发布的照片（审核通过、审核未通过、未审核）
4. 详情页
   1. 照片浏览量上报
   2. 查看照片信息（响应式）
   3. 评论模块(分页加载、发生评论)
   4. 更多相似推荐（待定）
5. 用户页
   1. 用户发布的照片
   2. 用户喜欢的照片
6. 发布照片页
7. 浏览历史页
8. 修改我的信息
   1. 基本信息
   2. 修改密码

# 频道 Pubsub

1. `user:page-bottom`，当前台项目的 main 组件触底时触发
2. `user:post-comment`，发送评论成功时触发
3. `user:to-top`,路由路径变化触发或手动触发，让 main 组件滚动到顶部
4. `window.resize`,当浏览器视口尺寸发生变化时，传入 window.inner 的高宽

# 后台

## 布局

非常经典的`Header`、`Sider`、`Main`，即可。
`Header`:展示 logo、用户信息、用户功能下拉菜单、展示面包屑？
`Sider`:导航菜单。
`Main`:主视图，业务基本汇聚于此。

## 角色权限

### Admin

1. 首页数据看板
2. 照片列表表格（审核照片）
3. 个人信息管理

### SuperAdmin

在`Admin`基础之上还包括以下权限:

1. 用户信息管理（修改所有账户的信息）
2. 下发管理员`Admin`角色

## 页面

1. 首页数据看板
2. 照片列表表格（审核照片）
3. 个人信息管理
4. 用户信息管理（修改所有账户的信息）
5. 下发管理员`Admin`角色

# Time

## 10.4

1. 登录注册页添加主题、语言设置组件
2. 封装导航钩子，易于维护
3. 搭建 My 页的发布照片页
4. 封装函数式模态框(实现元素共享、居中的过渡效果)
5. 封装 PhotoItemMini 组件
6. 修改检查前台路由路径匹配的函数 bug(bug 问题是：当前子路由全部不命中就返回不命中的结果了，完全没考虑兄弟路由等后面未校验路由，需要等所有路由路径都被校验过了才能给出结果！！！)
7. My 和 User 页搭建完成

明日任务:完成个人信息修改、发布照片、历史任务

## 10.5

1. 封装 useQuery 钩子，快速校验解析路由 query 参数
2. User 页参数化 tabs。路由查询参数与 tabs 栏绑定，可以通过路由切换 tabs 栏
3. 后端:
   1. 完善了修改密码接口，需要校验当前密码才能更新成功
   2. 新增上传头像接口
   3. 完善更新用户信息接口，可以选择性的更新某个字段了
4. 编辑页完成，包括修改用户信息、修改用户密码
5. 完善了`ImgCutter`组件，如动画，配置项等。
6. 搜索、浏览历史、发布照片路由页面配置
7. 完善头部下拉导航菜单
8. 网页标题国际化
9. 发布照片页搭建

## 10.6

1. 发布照片页完成
2. 是否要做照片审核结果的推送功能？(通过 `SSE`、`Websocket` 长连接通信)，完成，通过 `SSE` 技术实现了服务端推送消息。(能否改成`websocket`?因为`SSE`比较适合广播)
3. 后端：
   1. 通过 `SSE` 实现了照片审核结果的消息推送，客户端可以即时收到照片审核的结果。
   2. 增加通过 pid 列表获取照片列表
4. 历史记录页完成

TODO：

1. 搜索页接口
2. 前台搜索页
3. 后台搭建
